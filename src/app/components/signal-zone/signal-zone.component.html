<p-dialog [(visible)]="isSignalZoneClicked"
          header="Signaler une zone"
          [style]="{width: '80vw'}">
  <div class="card card-body center auth-form">

    <p class="font-weight-normal title">Devenir un Clean Walker !</p>
    <p class="subtitle">Rejoignez les clean walkers partout dans le monde !</p>
    <form [formGroup]="registerForm" (ngSubmit)="register()">

      <fieldset class="form-group">
        <input type="email" placeholder="Email" class="form-control" formControlName="email" required>
        <span
          *ngIf="!registerForm.controls.email.valid && registerForm.controls.email.errors['required'] && registerForm.controls.email.touched"
          class="help-block">Email obligatoire</span>
        <span
          *ngIf="!registerForm.controls.email.valid && registerForm.controls.email.errors['email'] && !registerForm.controls.email.errors['required'] && registerForm.controls.email.touched"
          class="help-block">Veuillez entrer un email valide</span>
      </fieldset>

      <fieldset class="form-group">
        <input type="text" placeholder="Nom" class="form-control" formControlName="fullName" required>
        <span
          *ngIf="!registerForm.controls.fullName.valid && registerForm.controls.fullName.errors['required'] && registerForm.controls.fullName.touched"
          class="help-block">Nom obligatoire</span>
      </fieldset>

      <fieldset class="form-group">
        <input type="text" placeholder="Prénom" class="form-control" formControlName="firstName" required>
        <span
          *ngIf="!registerForm.controls.firstName.valid && registerForm.controls.firstName.errors['required'] && registerForm.controls.firstName.touched"
          class="help-block">Prénom obligatoire</span>
      </fieldset>

      <fieldset class="form-group">
        <!--<input type="password" placeholder="Mot de passe" class="form-control" formControlName="password"
               [(ngModel)]="userModel.password"
               (ngModelChange)="checkPasswordMatch($event)" required>-->
        <span
          *ngIf="!registerForm.controls.password.valid && registerForm.controls.password.errors['required'] && registerForm.controls.password.touched && !registerForm.controls.password.errors['minLength']"
          class="help-block">Mot de passe obligatoire</span>
        <span
          *ngIf="!registerForm.controls.password.valid && registerForm.controls.password.errors['pattern'] && !registerForm.controls.password.errors['minlength']  && !registerForm.controls.password.errors['required']"
          class="help-block">Veuillez entrer un mot de passe valide<br>
                      <span class="help-block">
                        Le mot de passe doit avoir au moins 8 caractères dont 1 lettre minuscule, 1 lettre majuscule, 1 caractère spécial, et 1 nombre.
                      </span></span>
      </fieldset>

      <fieldset class="form-group">
        <!--<input type="password" placeholder="Confirmation de mot de passe" class="form-control"
               formControlName="confirmPassword" [(ngModel)]="userModel.confirmPassword"
               (ngModelChange)="checkConfirmPasswordMatch($event)" required>-->
        <span
          *ngIf="!registerForm.controls.confirmPassword.valid && registerForm.controls.confirmPassword.errors['required'] && registerForm.controls.confirmPassword.touched && !registerForm.controls.confirmPassword.errors['minlength'] "
          class="help-block">Confirmation de mot de passe obligatoire</span>
        <span class="help-block" *ngIf="!passwordMatched">Les mots de passe ne correspondent pas</span>
      </fieldset>

      <fieldset class="form-group">
        <input type="text" placeholder="Numéro de téléphone" class="form-control" formControlName="mobile"
               maxlength="10" required>
        <span
          *ngIf="!registerForm.controls.mobile.valid && registerForm.controls.mobile.errors['required'] && registerForm.controls.mobile.touched"
          class="help-block">Numéro de téléphone obligatoire<br/></span>
        <span
          *ngIf="!registerForm.controls.mobile.valid && (!registerForm.controls.mobile.errors['minlength']  || !registerForm.controls.mobile.errors['required'] || !registerForm.controls.mobile.errors['pattern']) && registerForm.controls.mobile.touched"
          class="help-block">Le numéro de téléphone doit contenir 10 digitaux et commencer par 0</span>
      </fieldset>

      <p class="subtitle">En vous inscrivant vous acceptez les <a href="FAIRE UNE PAGE CONDITION GENERALES">termes
        généraux</a></p>

      <fieldset class="form-group">
        <button pButton type="submit" label="S'inscrire" class="p-button-secondary"
                [disabled]=!registerForm.valid></button>
      </fieldset>
      <span (click)="loginCall()" class="link">Déjà inscrit ?</span>
      <p>{{loading}}</p>
      <p>{{message}}</p>
    </form>
  </div>

  <!--<div>
    <h2>Adresse de départ</h2>
    <div>
      <img src="assets/map-marker-alt-solid.svg" alt="" class="icon"/>
      <p class="bold-text">
        {{visibleCarpool.carpoolDepartureStreet}}<br/>
        {{visibleCarpool.carpoolDepartureCity}} {{visibleCarpool.carpoolDepartureZipcode}}<br/>
      </p>
    </div>
    <p>Conducteur : <span class="bold-text">{{visibleCarpool.conductor.firstname}} {{visibleCarpool.conductor.name}} :
      {{visibleCarpool.conductorId}}, {{visibleCarpool.conductor.phoneNumber}}</span></p>
    <div style="text-align: right"
         *ngIf="visibleEvent.dateHourStart > currentTimestamp && visibleCarpool.carpoolRemainingPlaces > 0">
      <span class="bold-text">{{visibleCarpool.carpoolRemainingPlaces}}</span> places restantes
    </div>

    <h3>Participants</h3>
    <p-table [value]="carpoolParticipants">
      <ng-template pTemplate="body" let-participant>
        <tr>
          <td>{{participant.firstname}} {{participant.name}}
            - {{participant.mail}}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <ng-template pTemplate="footer">
    <p-button
      *ngIf="visibleEvent.dateHourStart > currentTimestamp && visibleCarpool.carpoolRemainingPlaces > 0 &&
              !currentUserParticipateToCarpools.get(visibleCarpool.carpoolId) && !currentUserParticipateToCarpool &&
              currentUser.mail !== visibleCarpool.conductorId && currentUserParticipateToEvents.get(visibleEvent.eventId)"
      label="Participer au covoiturage" (onClick)="participateToCarpool(visibleCarpool)"
      icon="pi pi-check" styleClass="p-button-success"
      [style]="{'margin-left': '.5em'}"></p-button>
    <p-button
      *ngIf="visibleEvent.dateHourStart > currentTimestamp && currentUserParticipateToCarpools.get(visibleCarpool.carpoolId)"
      label="Se désinscrire du covoiturage" (onClick)="unsubscribeToCarpool(visibleCarpool)"
      icon="pi pi-check" styleClass="p-button-danger"
      [style]="{'margin-left': '.5em'}"></p-button>
  </ng-template>-->
</p-dialog>
